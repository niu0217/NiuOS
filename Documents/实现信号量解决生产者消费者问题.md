# 实现信号量解决生产者消费者问题

## 1. 理论知识

在实现信号量时，信号量可以取到负值，通过这个负值的大小，可以知道有几个进程正在休眠等待此信号量。比如下面的情况：
设有一整形变量sem，作为一个信号量。此时缓冲区为空，sem=0。

1. 消费者C1请求从缓冲区取数，不能取到，睡眠等待。sem=-1<0，表示有一个进程因缺资源而等待。
2. 消费者C2也请求从缓冲区取数，睡眠等待。sem=-2<0，表示有两个进程因缺资源而等待。
3. 生产者P往缓冲区写入一个数，sem=sem+1=-1<=0，并唤醒等待队列的头进程C1，C1处于就绪态，C2仍处于睡眠等待。
4. 生产者P继续往缓冲区写入一个数，sem=0<=0，并唤醒C2，C1、C2就处于就绪状态。

